<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <!-- Gráfico de linha -->
  <div class="bg-white rounded-lg shadow p-4">
    <h3 class="text-lg font-semibold mb-4">Gastos Mensais</h3>
    <canvas
      baseChart
      [data]="lineChartData"
      chartType="line"
      class="max-h-80"
    ></canvas>
  </div>

  <!-- Gráfico de pizza -->
  <div class="bg-white rounded-lg shadow p-4">
    <h3 class="text-lg font-semibold mb-4">Categorias de Assinaturas</h3>
    <canvas
      baseChart
      [data]="pieChartData"
      chartType="pie"
      class="max-h-80"
    ></canvas>
  </div>
</div>

<!-- Lista de assinaturas -->
<div class="bg-white mt-6 p-4 rounded-lg shadow">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-lg font-semibold">Minhas Assinaturas</h3>
    <button
      class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500 transition"
      (click)="openModal()"
    >
      + Nova Assinatura
    </button>
  </div>

  <ul class="divide-y">
    @for (subscription of subscriptions(); track subscription.id) {
    <li class="py-2 flex justify-between">
      <span>{{ subscription.name }}</span>
      <span class="text-gray-500">{{ subscription.price | currency }}</span>
    </li>
    }
  </ul>
</div>

<!-- Modal -->
<div
  *ngIf="showModal"
  class="fixed inset-0 bg-white/30 backdrop-invert backdrop-blur-xs flex items-center justify-center z-50"
>
  <div class="bg-white w-full max-w-md rounded-lg p-6 shadow-lg relative">
    <button
      class="absolute top-3 right-3 text-gray-500 hover:text-gray-700"
      (click)="closeModal()"
    >
      ✕
    </button>

    <h2 class="text-xl font-semibold mb-4">Nova Assinatura</h2>

    <form [formGroup]="subscriptionForm" (ngSubmit)="submit()">
      <input
        formControlName="name"
        placeholder="Nome"
        class="input-clean mb-2 w-full"
      />
      <input
        formControlName="description"
        placeholder="Descrição"
        class="input-clean mb-2 w-full"
      />
      <input
        formControlName="price"
        type="number"
        placeholder="Valor (R$)"
        class="input-clean mb-2 w-full"
      />
      <input
        formControlName="startDate"
        type="date"
        placeholder="Data de início"
        class="input-clean mb-2 w-full"
      />

      <div class="flex justify-end gap-2 mt-4">
        <button type="button" (click)="closeModal()" class="text-gray-500">
          Cancelar
        </button>
        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">
          Salvar
        </button>
      </div>
    </form>
  </div>
</div>
